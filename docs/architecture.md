# 系統架構

本系統採用**模組化的微服務式架構**，將前端、後端和 AI 功能分離為獨立的服務。這種設計提供了高度的靈活性、可擴展性及維護性。

## 核心組件：

1.  **前端 (Vue.js)**：
    * **角色**：提供直觀的使用者介面，支援 B2C (建案瀏覽、房價預測) 和 B2B (未來可擴展的數據分析儀表板) 使用場景。
    * **技術**：Vue.js 3, Vite, Tailwind CSS, Axios, Vue Router。
    * **部署**：透過 Nginx 服務靜態文件。

2.  **後端 (Laravel)**：
    * **角色**：作為強大的 RESTful API 層，負責資料存儲、檢索、使用者認證（未來擴展）、以及與 AI 服務的協調。
    * **技術**：PHP 8.2, Laravel 11, GuzzleHttp (用於內部 API 呼叫)。
    * **部署**：使用 PHP-FPM 處理 PHP 邏輯，Nginx 作為 Web 服務器，Supervisor 管理進程。

3.  **AI 服務 (FastAPI)**：
    * **角色**：專為機器學習模型推斷和自然語言處理 (NLP) 任務設計的高性能服務，提供房價預測和自動內容生成。
    * **技術**：Python 3.10, FastAPI, Uvicorn, Pandas, Scikit-learn, XGBoost, OpenAI (可選)。
    * **部署**：基於 Uvicorn 服務。

4.  **資料庫 (MySQL)**：
    * **角色**：中央資料儲存庫，用於所有結構化的不動產數據。
    * **技術**：MySQL 8.0。
    * **持久化**：使用 Docker Volume 確保資料持久性。

5.  **容器化 (Docker)**：
    * **角色**：所有服務均透過 Docker 容器化，確保部署環境的一致性、隔離性及可擴展性。
    * **工具**：Docker Compose 用於定義和運行多容器 Docker 應用程式。

## 系統互動流程圖 (Mermaid):

```mermaid
graph TD
    A[使用者 (瀏覽器)] -- GET / (Web 介面) --> B(前端服務 Vue.js/Nginx);
    B -- GET /api/properties --> C(後端服務 Laravel);
    C -- SELECT FROM properties --> D[MySQL 資料庫];
    B -- POST /predict/price --> E(AI 服務 FastAPI);
    C -- POST /properties/{id}/generate-content --> E;
    E -- 呼叫外部 API --> F[外部 AI 服務 (e.g., OpenAI)];
    E -- 返回 JSON --> C;
    C -- 返回 JSON --> B;
    B -- 渲染頁面 --> A;

    subgraph 容器化環境 (Docker Compose)
        B
        C
        D
        E
    end
```

## SaaS 計費模型案例：

本系統模組化設計為 SaaS (軟體即服務) 模式的商業化提供了彈性。可能的計費模型包括：

* **基礎訂閱費 (Base Subscription)**：
    * 針對基礎功能（如資料查詢、建案瀏覽）收取月費或年費。
    * 提供不同層級的訂閱方案（例如：標準版、專業版、企業版），依據資料存取量、用戶數、功能集（如高級報告）區分。
    * **範例**：
        * **標準版**：每月 $99 USD，提供 1 個用戶帳號、每月 500 次房價預測。
        * **專業版**：每月 $299 USD，提供 5 個用戶帳號、無限次房價預測、每月 100 篇文案生成。

* **API 使用量計費 (API Usage-based Billing)**：
    * 針對透過 API 存取數據或呼叫 AI 服務（房價預測、內容生成）的次數進行計費。
    * 特別適用於 B2B 客戶，他們可能將系統功能整合到自己的應用程式中。
    * **範例**：
        * **房價預測 API**：每月免費 1000 次呼叫，之後每 1000 次呼叫 $5 USD。
        * **內容生成 API**：每生成一篇文案 $0.5 USD。

* **增值服務 (Value-added Services)**：
    * 高級分析報告、自定義數據整合、專屬模型訓練、優先客戶支援等，可以作為獨立的付費附加服務。
    * **範例**：
        * **客製化區域價值報告**：按報告收費，每份 $50 USD。
        * **專屬模型訓練**：按次收費，每次 $500 USD，用於訓練客戶自有數據模型。

* **企業級解決方案 (Enterprise Solutions)**：
    * 針對大型企業或有特殊需求客戶提供。
    * **計費模式**：客製化報價。
    * **服務內容**：
        * 無限用戶數與 API 呼叫次數。
        * 專屬私有雲部署或內部部署選項。
        * 高級數據安全與合規性支援。
        * 24/7 優先技術支援與專屬客戶經理。
        * 深度數據整合與客製化模型開發。
        * SLA (服務級別協議) 保證。
    * **適用對象**：大型房產開發商、金融機構、政府機關等。

這些計費模型可以靈活組合，以滿足不同客戶群體的需求，並最大化系統的商業價值。

## 安全考量：

* **API 金鑰驗證**：後端 API 透過 `X-API-KEY` 標頭進行驗證，金鑰儲存於資料庫中，保護敏感端點。
* **CORS 配置**：FastAPI 和 Nginx 配置 CORS，確保前端可以安全地訪問後端和 AI 服務。
* **環境變數**：敏感資訊（如 API 金鑰、資料庫憑證）儲存於 `.env` 檔案中，不會硬編碼在程式碼中。

## 未來擴展性：

* 每個模組都獨立運行，易於升級和擴展。
* 可以輕鬆地添加新的 AI 模型或後端功能模組。
* 支援 SaaS 模式和 API 商品化，便於業務拓展。
